# acra-jooq-example

This repository contains example of jOOQ application integrated with Acra

### Requirements

* Java

### How to Run

1) Run Postgres database and AcraServer;
2) Create database sequence `acra_example_seq` and table `acra_example`:
```
DROP TABLE IF EXISTS acra_example;
DROP SEQUENCE IF EXISTS acra_example_seq;
CREATE SEQUENCE IF NOT EXISTS acra_example_seq START 1;
CREATE TABLE IF NOT EXISTS acra_example(id INTEGER PRIMARY KEY DEFAULT nextval('acra_example_seq'), name BYTEA, email BYTEA, password BYTEA);
```
3) Run jOOQ code generator:
```
java --add-modules java.xml.bind -cp libs/*:. org.jooq.codegen.GenerationTool database_schema.xml
```
4) Compile autogenerated jOOQ code:
```
find -path "*/src/jooq/*.java" > sources.txt
javac --add-modules java.xml.ws.annotation -cp libs/*:. @sources.txt -d out/production/jOOQ-demo/
```
5) Compile example utility:
```
find -path "*/src/org/*.java" > sources.txt
javac --add-modules=java.xml.bind,java.xml.ws.annotation -cp libs/*:out/production/jOOQ-demo:. @sources.txt -d out/production/jOOQ-demo/
```
6) Run example:
```
java -cp libs/*:out/production/jOOQ-demo org.cossacklabs.Main
```

### Details 

Utility inserts randomized rows that express user (name, email, password) from following alphabets:
```
public static final String[] NAMES = {"Jessica", "Ashley", "Amanda", "Sarah", "Jennifer", "Emily", "Samantha", "Elizabeth", "Stephanie", "Lauren", "Michael", "Matthew", "Joshua", "Daniel", "David", "Andrew", "John", "Brandon", "Nicholas", "James"};
public static final String[] EMAILS = {"a1@gmail.com", "b2@aol.com", "c3@zoho.com", "d4@gmail.com", "e5@proton.com", "f6@gmail.com", "g7@outlook.com", "h8@yandex.com", "i9@rambler.com", "j10@gmx.com"};
public static final String[] PASSWORDS = {"killer", "master", "angel1", "liverpool", "jesus1", "babygirl11", "naruto", "superman1290", "50cent", "letmeit"};
```

